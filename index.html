<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		
		<title>Divide and Conquer</title>

		<meta name="description" content="Lecture about Clean Architecture">
		<meta name="author" content="Pablo Aguilar">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h2>Divide and Conquer</h2>
					<p>
						<small><a href="https://github.com/thepabloaguilar/">@thepabloaguilar</a></small>
					</p>
				</section>

				<section>
					<section>
						<h1>Divide</h1>
						<h4>the code</h4>
						<h1>Conquer</h1>
						<h4>maintainability</h4>
					</section>
					<section>
						<h5>We can divide our code in many ways, sometimes this division is called:</h5>
						<ul>
							<li>Design Pattern</li>
							<li>Architectural Design Patterns</li>
						</ul>
					</section>
					<section>
						In the end, everything is about how we can organize our code to make it more understandable,
						maintainable and team-friendly
					</section>
				</section>

				<section data-auto-animate>
					<h2 data-id="code-title">Flask minimal application</h2>
					<pre data-id="code-animation">
						<code class="python" data-trim data-line-numbers>
							from flask import Flask

							app = Flask(__name__)

							@app.route('/')
							def hello_world():
							  return 'Hello, World!'
						</code>
					</pre>
				</section>
				<section data-auto-animate>
					<h2 data-id="code-title">Flask + Database</h2>
					<pre data-id="code-animation">
						<code class="python" data-trim data-line-numbers="|1-5|7-13|15-21">
							from flask import Flask

							app = Flask(__name__)
							app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:////.db'
							db = SQLAlchemy(app)

							class User(db.Model):
							  id = db.Column(db.Integer, primary_key=True)
							  username = db.Column(db.String(80), unique=True, nullable=False)
							  email = db.Column(db.String(120), unique=True, nullable=False)

							  def __repr__(self):
							    return '&lt;User %r&gt;' % self.username
							
							@app.route('/')
							def hello_world():
							  return 'Hello, World!'
							
							@app.route('/users', methods=['GET'])
							def get_users():
							  return User.query.all()
						</code>
					</pre>
				</section>
				<section data-auto-animate>
					<h3 data-id="code-title">Flask + Database + Marshmallow</h3>
					<pre data-id="code-animation">
						<code class="python" data-trim data-line-numbers="|17-19|29-45|31-36|38|40-45">
							from flask import Flask, request
							from flask_sqlalchemy import SQLAlchemy
							from marshmallow import Schema, fields, ValidationError

							app = Flask(__name__)
							app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:////.db'
							db = SQLAlchemy(app)

							class User(db.Model):
							  id = db.Column(db.Integer, primary_key=True)
							  username = db.Column(db.String(80), unique=True, nullable=False)
							  email = db.Column(db.String(120), unique=True, nullable=False)

							  def __repr__(self):
							    return '&lt;User %r&gt;' % self.username
							
							class UserSchema(Schema):
							  username = fields.Str()
							  email = fields.Email()
							
							@app.route('/')
							def hello_world():
							  return 'Hello, World!'
							
							@app.route('/users', methods=['GET'])
							def get_users():
							  return User.query.all()
							
							@app.route('/users', methods=['POST'])
							def create_user():
							  user_data = request.json

							  try:
							    validated_user_data = UserSchema().load(user_data)
							  except ValidationError as err:
							    return err.messages, 400
                                
							  # We can have business logic here to validate something about the user
								
							  user = User(validated_user_data.username, validated_user_data.email)
                              
							  db.session.add(user)
							  db.session.commit()
							  
							  return user
						</code>
					</pre>
				</section>

				<section>
					<section>
						<h3>If you do not choose the application architecture other people will choose to you</h3>
					</section>
					<section>
						<h4>Sometimes your framework will choose to you, see the big example here:</h4>
						<img src="images/django-logo.png" />
					</section>
					<section>
						<p>
							Django enforces you to use its own architecture, you can try to modify it but
							if a plugin or something needs the original structure you can have some problems
						</p>
					</section>
				</section>

				<section>
					<section>
						<p>Here, I'm going to talk about Clean Architecture</p>
						<img src="images/clean-architecture.jpg" alt="Clean Architecture Image" />
					</section>
					<section>
						<h1>TODO</h1>
						<ul>
							<li>Entities: Business entities</li>
							<li>Use Case: Business Logic</li>
							<li>Interface Adapters:</li>
							<li>Frameworks and Drivers:</li>
						</ul>
					</section>
				</section>

				<section>
					<h2>Patterns usually mean I have run out of language</h2>
				</section>

				<section>
					<h4>References</h4>
					<ul>
						<li>
							<a href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html">
								The Clean Architecture by Robert C. Martin (Uncle Bob)
							</a>
						</li>
						<li>
							<a href="https://pt.slideshare.net/mattiabattiston/real-life-clean-architecture-61242830">
								Real Life Clean Architecture
							</a>
						</li>
					</ul>
				</section>

				<section>
					<h2>Thanks!</h2>
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
